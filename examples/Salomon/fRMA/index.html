<h1 id="results">Results</h1>
<p>The scripts below were used to evaluate the consistency of the fRMA normalization vectors by repeating the training process with 5 different random samples and then comparing a random selection of arrays normalized by all five trained vectors as well as by ordinary RMA. <a href="fRMA_consistency_results">This folder</a> shows the results.</p>
<h1 id="scripts">Scripts</h1>
<p>There are two pairs of scripts. The first pair, <code>train.R</code> and <code>test.R</code>, handle the tasks of (respectively) generating/training the main fRMA vectors and ensuring that they work by normalizing all the data with them. The second pair, <code>consistency-train.R</code> and <code>consistency-evaluate.R</code>, handle (respectively) training five separate fRMA vector sets and testing their consistency.</p>
<h2 id="train.r-creating-the-frma-vectors"><a href="train.R"><code>train.R</code></a>: Creating the fRMA vectors</h2>
<p>This script reads the sample metadata tables, assembles the full file lists for BX and PAX tissues, and trains a set of fRMA vectors for each tissue. It exports each of these vector sets to an installable R package.</p>
<h2 id="test.r-testing-the-frma-vectors"><a href="test.R"><code>test.R</code></a>: Testing the fRMA vectors</h2>
<p>This script simply loads all the arrays and normalizes them using the appropriate fRMA vectors that were generated by <code>train.R</code>. It should be run after installing the packages produced by <code>train.R</code>. It is simply used for testing to make sure the fRMA vectors work.</p>
<h2 id="consistency-train.r-train-several-vector-sets-for-each-tissue"><a href="consistency-train.R"><code>consistency-train.R</code></a>: Train several vector sets for each tissue</h2>
<p>This script essentially does the same thing as <code>train.R</code>, only it does it five times with five different subsamplings of the arrays to generate five different fRMA vector sets and saves them all in an R data file.</p>
<h2 id="consistency-evaluate.r-verify-consistency-of-frma-vectors"><a href="consistency-evaluate.R"><code>consistency-evaluate.R</code></a>: Verify consistency of fRMA vectors</h2>
<p>This script loads the data file from <code>consistency-train.R</code>, then loads 20 random arrays from each tissue and normalizes them with all five fRMA vector sets, and also by ordinary RMA. It then produces plots of M vs A for every pair of normalizations. Unlike regular MA plots, these are <em>not</em> plotting arrays against each other, but rather arrays against themselves, but normalized using two different methods. So if two normalizations were perfectly consistent, the MA plot would be a flat horizontal line at M=0. It also produces boxplots and violin plots showing the M distribution for each of the pairwise comparisons.</p>
